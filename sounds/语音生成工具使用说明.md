# 自定义语音文件生成工具使用说明

## 文件说明

### 1. generate_custom_voice.py
Python脚本，提供交互式界面生成语音文件。

### 2. 生成语音文件.bat
Windows批处理文件，双击即可运行Python脚本。

## 使用方法

### 方法1：双击bat文件（推荐）

1. 双击 `生成语音文件.bat`
2. 按照提示操作

### 方法2：命令行运行

```cmd
python generate_custom_voice.py
```

## 功能说明

### 1. 生成单个语音文件

选择菜单中的 `1. 生成单个语音文件`

输入示例：
```
请输入文件名（不带扩展名，例如: success）: success
请输入语音文本（例如: 成功）: 成功
```

生成的文件：`sounds/success.txt`

### 2. 生成多个语音文件

选择菜单中的 `2. 生成多个语音文件`

输入示例：
```
格式: 文件名=语音文本
每行一个，输入空行结束

请输入（文件名=语音文本）: success=成功
请输入（文件名=语音文本）: error=错误
请输入（文件名=语音文本）: hyphen=杠
请输入（文件名=语音文本）: （直接按回车结束）
```

生成的文件：
- `sounds/success.txt` - "成功"
- `sounds/error.txt` - "错误"
- `sounds/hyphen.txt` - "杠"

### 3. 从预设列表生成

选择菜单中的 `3. 从预设列表生成`

预设分类：
1. 数字（0-9）
2. 错误提示（未找到、重复、重复扫描、单号错误、错误、未分配区域）
3. 成功提示（成功、完成、已扫描、扫描完成）
4. 其他（欢迎使用扫描系统、请扫描、等待扫描、杠）

可以选择生成单个分类或全部生成。

## 常用语音文件示例

### 数字语音
```
文件名: number_0
语音文本: 零

文件名: number_1
语音文本: 一

文件名: number_2
语音文本: 二
...
```

### 错误提示
```
文件名: error_not_found
语音文本: 未找到

文件名: error_duplicate
语音文本: 重复

文件名: error_duplicate_scan
语音文本: 重复扫描

文件名: error_tracking_error
语音文本: 单号错误

文件名: error_no_zone
语音文本: 未分配区域
```

### 成功提示
```
文件名: success_success
语音文本: 成功

文件名: success_scan_completed
语音文本: 扫描完成
```

### 其他
```
文件名: other_hyphen
语音文本: 杠
```

## 生成的文件格式

每个生成的TXT文件包含：
```
语音文本: 成功
提示: 此文件用于记录语音文本，实际语音由应用TTS生成
```

## 在应用中使用

### 方法1：读取文本文件并使用TTS

```typescript
import { Filesystem } from '@capacitor/filesystem';

export const speakFromFile = async (filename: string) => {
  try {
    const { data } = await Filesystem.readFile({
      path: `sounds/${filename}.txt`,
      directory: FilesystemDirectory.Public
    });

    const text = data.toString();
    
    // 使用现有的TTS功能播报文本
    await speak(text);
  } catch (e) {
    console.error('读取语音文件失败:', e);
  }
};
```

### 方法2：直接使用文本内容

将生成的文本内容直接复制到应用代码中使用。

## 注意事项

1. **文件命名规则**
   - 使用小写字母和下划线
   - 不要使用特殊字符
   - 不要包含扩展名（.txt会自动添加）

2. **语音文本**
   - 使用简洁的中文
   - 避免过长的句子
   - 确保发音准确

3. **文件位置**
   - 所有文件保存在 `sounds/` 目录
   - 应用需要能够访问该目录

4. **备份**
   - 建议定期备份 `sounds/` 目录
   - 可以手动修改已生成的文件

## 故障排查

### 问题：双击bat文件没有反应

**解决方案：**
1. 右键bat文件，选择"以管理员身份运行"
2. 检查Python是否正确安装
3. 查看错误提示信息

### 问题：提示"未找到Python"

**解决方案：**
1. 确认Python已安装
2. 重新运行 `生成语音文件.bat`
3. 或手动运行：`python generate_custom_voice.py`

### 问题：生成的文件打不开

**解决方案：**
1. 确认使用UTF-8编码
2. 使用记事本或其他文本编辑器打开
3. 检查文件是否在 `sounds/` 目录

## 快速开始

1. 双击 `生成语音文件.bat`
2. 选择 `3. 从预设列表生成`
3. 选择 `4. 全部`
4. 等待生成完成

这样就会生成所有预设的语音文件！
